## 面包屑

### 需求描述

在页面内部要显示当前页面的路径信息

### 实现的核心代码

```
var hash = window.location.hash;
hash = hash.slice(2);
try {
  var menus = parent.window.getBreadcrumb(hash);
  this.element.innerHTML = menus.join(" / ");
} catch (e) {
  console.log(e);
}
```

通过当前页面的url获取应用id，然后调用父层window上提供的接口getBreadcrumb来获取路径信息

## 关闭提示
### 需求描述
当关闭portal中的页面时需要增加判断，如果存在修改则不进行关闭
### 实现的核心代码
```
window.confirmClose = function(id,data){
	var flag = 1;
	// 判断单表档案的弹框界面是否显示
	if($("#dialog_layer").is(":visible")){
		flag = 0;
	}
	//判断主子页面的单据子页面是否显示
	if($(".ui-panel.ui-bill-panel").is(":visible")){
		flag = 0;
	}
	// 如果处于浏览态直接关闭页签,处于编辑态弹框提醒,确认后关闭页签
	if(flag){
		window.parent.confirmDel(data)
	}else{
		$.confirmDialog({
			msg1: "当前页面数据还未保存，是否关闭",
			msg2: '此操作不可逆',
			width: "400px",
			onOk: function () {
				window.parent.confirmDel(data)
			}
		});
	}
}
```
在页面内实现接口方法confirmClose，当执行关闭操作时portal会调用此方法。

如果允许执行关闭操作，则调用portal已提供的方法window.parent.confirmDel(data)